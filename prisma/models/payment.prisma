model Payment {
  id          BigInt        @id @default(autoincrement())
  userId      String?       @db.Uuid
  gatewayName String        @db.VarChar(32)
  amount      Decimal       @db.Decimal(20, 8)
  currency    String        @db.VarChar(32)
  authority   String        @db.VarChar(128)
  referenceId String?       @db.VarChar(128)
  status      PaymentStatus @default(pending)

  statusCheckedCount Int       @default(0)
  paidAt             DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user User? @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@unique([gatewayName, authority])
  @@unique([gatewayName, referenceId])
}
